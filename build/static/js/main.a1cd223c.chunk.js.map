{"version":3,"sources":["redux/auth/auth-slice.js","redux/auth/auth-operation.js","redux/auth/auth-selectors.js","redux/contacts/contacts-operations.js","redux/contacts/contacts-selector.js","redux/contacts/contacts-actions.js","components/Container/Container.js","components/Layout/Layout.js","components/Navigation/Navigation.js","components/UserMenu/UserMenu.js","components/AuthNav/AuthNav.js","components/AppBar/AppBar.js","components/PrivateRoute.js","components/PublicRoute.js","App.js","redux/contacts/contacts-reducer.js","redux/store.js","index.js"],"names":["authSlice","createSlice","name","initialState","user","email","token","isLoggedIn","isLoading","extraReducers","authOperation","register","fulfilled","state","action","payload","logIn","logOut","fetchCurrentUser","pending","rejected","axios","defaults","baseURL","headers","common","Authorization","createAsyncThunk","results","a","post","data","console","error","_","thunkAPI","getState","persistedToken","auth","rejectWithValue","get","operations","authSelectors","getIsLoggedIn","getUsername","getIsLoading","addContacts","number","dispatch","contacts","addContactsRequest","then","addContactsSuccess","catch","addContactsError","deleteContacts","contactsId","deleteContactsRequest","delete","deleteContactsSuccess","deleteContactsError","fetchContacts","fetchContactsRequest","fetchContactsSuccess","fetchContactsError","message","getFilter","filter","getFilteredContacts","createSelector","items","filterCase","toLowerCase","contact","includes","createAction","filterContacts","Container","children","className","Layout","styles","link","display","textDecoration","padding","fontWeight","color","activeLink","Navigation","useSelector","to","exact","style","activeStyle","container","alignItems","avatar","marginRight","UserMenu","useDispatch","type","onClick","authOperations","AuthNav","header","justifyContent","borderBottom","AppBar","PrivateRoute","routeProps","isLogesIn","PublicRoute","restricted","shouldRedirect","log","Home","lazy","Register","Login","Contacts","App","useEffect","fallback","path","createReducer","id","loading","combineReducers","middleware","getDefaultMiddleware","serializableCheck","ignoredActions","FLUSH","REHYDRATE","PAUSE","PERSIST","PURGE","REGISTER","authPersistConfig","key","storage","whitelist","store","configureStore","reducer","persistReducer","authReducer","contactsReducer","devTools","process","persistor","persistStore","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.a1cd223c.chunk.js","sourcesContent":["import { createSlice } from '@reduxjs/toolkit';\r\nimport authOperation from './auth-operation';\r\n\r\nconst initialState = {\r\n  user: { name: null, email: null },\r\n  token: null,\r\n  isLoggedIn: false,\r\n  isLoading: false,\r\n};\r\n\r\nconst authSlice = createSlice({\r\n  name: 'auth',\r\n  initialState,\r\n  extraReducers: {\r\n    [authOperation.register.fulfilled](state, action) {\r\n      state.user = action.payload.user;\r\n      state.token = action.payload.token;\r\n      state.isLoggedIn = true;\r\n    },\r\n    [authOperation.logIn.fulfilled](state, action) {\r\n      state.user = action.payload.user;\r\n      state.token = action.payload.token;\r\n      state.isLoggedIn = true;\r\n    },\r\n    [authOperation.logOut.fulfilled](state) {\r\n      state.user = { name: null, email: null };\r\n      state.token = null;\r\n      state.isLoggedIn = false;\r\n    },\r\n    [authOperation.fetchCurrentUser.pending](state) {\r\n      state.isLoading = true;\r\n    },\r\n    [authOperation.fetchCurrentUser.fulfilled](state, action) {\r\n      state.user = action.payload;\r\n      state.isLoggedIn = true;\r\n      state.isLoading = false;\r\n    },\r\n    [authOperation.fetchCurrentUser.rejected](state) {\r\n      state.isLoading = false;\r\n    },\r\n  },\r\n});\r\n\r\nexport default authSlice.reducer;\r\n","import axios from 'axios';\r\nimport { createAsyncThunk } from '@reduxjs/toolkit';\r\n\r\naxios.defaults.baseURL = 'https://connections-api.herokuapp.com';\r\n\r\nconst token = {\r\n  set(token) {\r\n    axios.defaults.headers.common.Authorization = `Bearer ${token}`;\r\n  },\r\n  unSet() {\r\n    axios.defaults.headers.common.Authorization = '';\r\n  },\r\n};\r\n\r\nconst register = createAsyncThunk('auth/register', async results => {\r\n  try {\r\n    const { data } = await axios.post('/users/signup', results);\r\n    token.set(data.token);\r\n    return data;\r\n  } catch (error) {\r\n    console.error(error);\r\n  }\r\n});\r\n\r\nconst logIn = createAsyncThunk('auth/login', async results => {\r\n  try {\r\n    const { data } = await axios.post('/users/login', results);\r\n    token.set(data.token);\r\n    return data;\r\n  } catch (error) {\r\n    console.error(error);\r\n  }\r\n});\r\n\r\nconst logOut = createAsyncThunk('auth/logout', async () => {\r\n  try {\r\n    await axios.post('/users/logout');\r\n    token.unSet();\r\n  } catch (error) {\r\n    console.error(error);\r\n  }\r\n});\r\n\r\nconst fetchCurrentUser = createAsyncThunk(\r\n  'auth/refresh',\r\n  async (_, thunkAPI) => {\r\n    const state = thunkAPI.getState();\r\n    const persistedToken = state.auth.token;\r\n\r\n    if (persistedToken === null) {\r\n      return thunkAPI.rejectWithValue();\r\n    }\r\n\r\n    token.set(persistedToken);\r\n\r\n    try {\r\n      const { data } = await axios.get('users/current');\r\n      return data;\r\n    } catch (error) {\r\n      console.error(error);\r\n    }\r\n  },\r\n);\r\n\r\nconst operations = {\r\n  register,\r\n  logOut,\r\n  logIn,\r\n  fetchCurrentUser,\r\n};\r\nexport default operations;\r\n","const getIsLoggedIn = state => state.auth.isLoggedIn;\r\n\r\nconst getUsername = state => state.auth.user.name;\r\nconst getIsLoading = state => state.auth.isLoading;\r\n\r\nconst authSelectors = {\r\n  getIsLoggedIn,\r\n  getUsername,\r\n  getIsLoading,\r\n};\r\nexport default authSelectors;\r\n","import axios from 'axios';\r\nimport {\r\n  addContactsRequest,\r\n  addContactsSuccess,\r\n  addContactsError,\r\n  deleteContactsRequest,\r\n  deleteContactsSuccess,\r\n  deleteContactsError,\r\n  fetchContactsRequest,\r\n  fetchContactsSuccess,\r\n  fetchContactsError,\r\n} from './contacts-actions';\r\n\r\nconst fetchContacts = () => async dispatch => {\r\n  dispatch(fetchContactsRequest());\r\n\r\n  try {\r\n    const { data } = await axios.get('/contacts');\r\n    dispatch(fetchContactsSuccess(data));\r\n  } catch (error) {\r\n    dispatch(fetchContactsError(error.message));\r\n  }\r\n  // axios\r\n  //   .get('/contacts')\r\n  //   .then(({ data }) => dispatch(fetchContactsSuccess(data)))\r\n  //   .catch(error => dispatch(fetchContactsError(error)));\r\n};\r\n\r\nconst addContacts = (name, number) => dispatch => {\r\n  const contacts = { name, number };\r\n  dispatch(addContactsRequest());\r\n  axios\r\n    .post('/contacts', contacts)\r\n    .then(({ data }) => dispatch(addContactsSuccess(data)))\r\n    .catch(error => dispatch(addContactsError(error)));\r\n};\r\n\r\nconst deleteContacts = contactsId => dispatch => {\r\n  dispatch(deleteContactsRequest());\r\n\r\n  axios\r\n    .delete(`/contacts/${contactsId}`)\r\n    .then(() => dispatch(deleteContactsSuccess(contactsId)))\r\n    .catch(error => dispatch(deleteContactsError(error)));\r\n};\r\n\r\n// eslint-disable-next-line import/no-anonymous-default-export\r\nexport default {\r\n  addContacts,\r\n  deleteContacts,\r\n  fetchContacts,\r\n};\r\n","import { createSelector } from '@reduxjs/toolkit';\r\nconst getFilter = state => state.contacts.filter;\r\n\r\nconst getAllContacts = state => state.contacts.items;\r\n\r\nconst getFilteredContacts = createSelector(\r\n  [getAllContacts, getFilter],\r\n  (contacts, filter) => {\r\n    const filterCase = filter.toLowerCase();\r\n\r\n    return contacts.filter(contact =>\r\n      contact.name.toLowerCase().includes(filterCase),\r\n    );\r\n  },\r\n);\r\n\r\n// eslint-disable-next-line import/no-anonymous-default-export\r\nexport default { getFilter, getFilteredContacts };\r\n","import { createAction } from '@reduxjs/toolkit';\r\n\r\nexport const fetchContactsRequest = createAction(\r\n  'contacts/fetchContactsRequest',\r\n);\r\nexport const fetchContactsSuccess = createAction(\r\n  'contacts/fetchContactsSuccess',\r\n);\r\nexport const fetchContactsError = createAction('contacts/fetchContactsError');\r\n\r\nexport const addContactsRequest = createAction('contacts/addContactsRequest');\r\nexport const addContactsSuccess = createAction('contacts/addContactsSuccess');\r\nexport const addContactsError = createAction('contacts/addContactsError');\r\n\r\nexport const deleteContactsRequest = createAction(\r\n  'contacts/deleteContactsRequest',\r\n);\r\nexport const deleteContactsSuccess = createAction(\r\n  'contacts/deleteContactsSuccess',\r\n);\r\nexport const deleteContactsError = createAction('contacts/deleteContactsError');\r\n\r\nexport const filterContacts = createAction('contacts/filter');\r\n","import React from 'react';\nimport './Container.css';\n\nconst Container = ({ children }) => <div className=\"Container\">{children}</div>;\n\nexport default Container;\n","import React from 'react';\nimport Container from '../Container/Container';\n\nconst Layout = ({ children }) => (\n  <>\n    <Container>{children}</Container>\n  </>\n);\n\nexport default Layout;\n","import React from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport { NavLink } from 'react-router-dom';\r\nimport { authSelectors } from '../../redux/auth';\r\n\r\nconst styles = {\r\n  link: {\r\n    display: 'inline-block',\r\n    textDecoration: 'none',\r\n    padding: 12,\r\n    fontWeight: 700,\r\n    color: '#2A363B',\r\n  },\r\n  activeLink: {\r\n    color: '#E84A5F',\r\n  },\r\n};\r\n\r\nconst Navigation = () => {\r\n  const isLoggedIn = useSelector(authSelectors.getIsLoggedIn);\r\n  return (\r\n    <nav>\r\n      <NavLink to=\"/\" exact style={styles.link} activeStyle={styles.activeLink}>\r\n        Home\r\n      </NavLink>\r\n\r\n      {isLoggedIn && (\r\n        <NavLink\r\n          to=\"/contacts\"\r\n          exact\r\n          style={styles.link}\r\n          activeStyle={styles.activeLink}\r\n        >\r\n          Contacts\r\n        </NavLink>\r\n      )}\r\n    </nav>\r\n  );\r\n};\r\n\r\nexport default Navigation;\r\n","import { useDispatch, useSelector } from 'react-redux';\r\nimport authOperations from '../../redux/auth/auth-operation';\r\nimport authSelectors from '../../redux/auth/auth-selectors';\r\n\r\nconst styles = {\r\n  container: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n  },\r\n  avatar: {\r\n    marginRight: 4,\r\n  },\r\n  name: {\r\n    fontWeight: 700,\r\n    marginRight: 12,\r\n  },\r\n};\r\n\r\nexport default function UserMenu() {\r\n  const dispatch = useDispatch();\r\n  const name = useSelector(authSelectors.getUsername);\r\n\r\n  return (\r\n    <div style={styles.container}>\r\n      <span style={styles.name}>Добро пожаловать,{name}</span>\r\n      <button type=\"button\" onClick={() => dispatch(authOperations.logOut())}>\r\n        Выйти\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport { NavLink } from 'react-router-dom';\r\n\r\nconst styles = {\r\n  link: {\r\n    display: 'inline-block',\r\n    textDecoration: 'none',\r\n    padding: 12,\r\n    fontWeight: 700,\r\n    color: '#2A363B',\r\n  },\r\n  activeLink: {\r\n    color: '#E84A5F',\r\n  },\r\n};\r\n\r\nexport default function AuthNav() {\r\n  return (\r\n    <div>\r\n      <NavLink\r\n        to=\"/register\"\r\n        exact\r\n        style={styles.link}\r\n        activeStyle={styles.activeLink}\r\n      >\r\n        Регистрация\r\n      </NavLink>\r\n      <NavLink\r\n        to=\"/login\"\r\n        exact\r\n        style={styles.link}\r\n        activeStyle={styles.activeLink}\r\n      >\r\n        Логин\r\n      </NavLink>\r\n    </div>\r\n  );\r\n}\r\n","import { useSelector } from 'react-redux';\r\nimport Navigation from '../Navigation/Navigation';\r\nimport UserMenu from '../UserMenu/UserMenu';\r\nimport AuthNav from '../AuthNav/AuthNav';\r\nimport { authSelectors } from '../../redux/auth';\r\n\r\nconst styles = {\r\n  header: {\r\n    display: 'flex',\r\n    justifyContent: 'space-between',\r\n    alignItems: 'center',\r\n    borderBottom: '1px solid #2A363B',\r\n  },\r\n};\r\n\r\nexport default function AppBar() {\r\n  const isLoggedIn = useSelector(authSelectors.getIsLoggedIn);\r\n  return (\r\n    <header style={styles.header}>\r\n      <Navigation />\r\n      {isLoggedIn ? <UserMenu /> : <AuthNav />}\r\n    </header>\r\n  );\r\n}\r\n","import { useSelector } from 'react-redux';\r\nimport { Route, Redirect } from 'react-router-dom';\r\nimport { authSelectors } from '../redux/auth';\r\n\r\nexport default function PrivateRoute({ children, ...routeProps }) {\r\n  const isLogesIn = useSelector(authSelectors.getIsLoggedIn);\r\n  return (\r\n    <Route {...routeProps}>\r\n      {isLogesIn ? children : <Redirect to=\"/login/\" />}\r\n    </Route>\r\n  );\r\n}\r\n","import { useSelector } from 'react-redux';\r\nimport { Route, Redirect } from 'react-router-dom';\r\nimport { authSelectors } from '../redux/auth';\r\n\r\nexport default function PublicRoute({\r\n  children,\r\n  restricted = false,\r\n  ...routeProps\r\n}) {\r\n  const isLogesIn = useSelector(authSelectors.getIsLoggedIn);\r\n  const shouldRedirect = isLogesIn && restricted;\r\n  console.log(shouldRedirect);\r\n  return (\r\n    <Route {...routeProps}>\r\n      {shouldRedirect ? <Redirect to=\"/\" /> : children}\r\n    </Route>\r\n  );\r\n}\r\n","import { useEffect, lazy, Suspense } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Switch } from 'react-router-dom';\nimport Layout from './components/Layout/Layout';\nimport AppBar from './components/AppBar/AppBar';\nimport { authOperation, authSelectors } from './redux/auth';\nimport PrivateRoute from './components/PrivateRoute';\nimport PublicRoute from './components/PublicRoute';\n\nconst Home = lazy(() => import('./views/Home/Home'));\nconst Register = lazy(() => import('./views/Register/Register'));\nconst Login = lazy(() => import('./views/Login/Login'));\nconst Contacts = lazy(() => import('./views/Contacts/Contacts'));\n\nexport default function App() {\n  const dispatch = useDispatch();\n  const isLoading = useSelector(authSelectors.getIsLoading);\n  console.log(isLoading);\n  useEffect(() => {\n    dispatch(authOperation.fetchCurrentUser());\n  }, [dispatch]);\n\n  return (\n    !isLoading && (\n      <Layout>\n        <AppBar />\n        <Switch>\n          <Suspense fallback={<div>Loading...</div>}>\n            <PublicRoute exact path=\"/\">\n              <Home />\n            </PublicRoute>\n            <PublicRoute path=\"/register\">\n              <Register />\n            </PublicRoute>\n            <PublicRoute exact path=\"/login\" restricted>\n              <Login />\n            </PublicRoute>\n            <PrivateRoute path=\"/contacts\" restricted>\n              <Contacts />\n            </PrivateRoute>\n          </Suspense>\n        </Switch>\n      </Layout>\n    )\n  );\n}\n","import { combineReducers } from 'redux';\r\nimport { createReducer } from '@reduxjs/toolkit';\r\nimport {\r\n  addContactsRequest,\r\n  addContactsSuccess,\r\n  addContactsError,\r\n  deleteContactsRequest,\r\n  deleteContactsSuccess,\r\n  deleteContactsError,\r\n  filterContacts,\r\n  fetchContactsRequest,\r\n  fetchContactsSuccess,\r\n  fetchContactsError,\r\n} from './contacts-actions';\r\n\r\nconst items = createReducer([], {\r\n  [fetchContactsSuccess]: (_, { payload }) => payload,\r\n  [addContactsSuccess]: (state, action) => [...state, action.payload],\r\n  [deleteContactsSuccess]: (state, action) =>\r\n    state.filter(contact => contact.id !== action.payload),\r\n});\r\n\r\nconst loading = createReducer(false, {\r\n  [fetchContactsRequest]: () => true,\r\n  [fetchContactsSuccess]: () => false,\r\n  [fetchContactsError]: () => false,\r\n  [addContactsRequest]: () => true,\r\n  [addContactsSuccess]: () => false,\r\n  [addContactsError]: () => false,\r\n  [deleteContactsRequest]: () => true,\r\n  [deleteContactsSuccess]: () => false,\r\n  [deleteContactsError]: () => false,\r\n});\r\n\r\nconst filter = createReducer('', {\r\n  [filterContacts]: (_, action) => action.payload,\r\n});\r\n\r\nexport default combineReducers({ items, filter, loading });\r\n","import { configureStore, getDefaultMiddleware } from '@reduxjs/toolkit';\r\nimport {\r\n  persistStore,\r\n  persistReducer,\r\n  FLUSH,\r\n  REHYDRATE,\r\n  PAUSE,\r\n  PERSIST,\r\n  PURGE,\r\n  REGISTER,\r\n} from 'redux-persist';\r\nimport storage from 'redux-persist/lib/storage'; // defaults to localStorage for web\r\nimport { contactsReducer } from './contacts';\r\nimport { authReducer } from './auth';\r\n\r\nconst middleware = [\r\n  ...getDefaultMiddleware({\r\n    serializableCheck: {\r\n      ignoredActions: [FLUSH, REHYDRATE, PAUSE, PERSIST, PURGE, REGISTER],\r\n    },\r\n  }),\r\n];\r\n\r\nconst authPersistConfig = {\r\n  key: 'auth',\r\n  storage,\r\n  whitelist: ['token'],\r\n};\r\n\r\nexport const store = configureStore({\r\n  reducer: {\r\n    auth: persistReducer(authPersistConfig, authReducer),\r\n    contacts: contactsReducer,\r\n  },\r\n  middleware,\r\n  devTools: process.env.NODE_ENV === 'development',\r\n});\r\n\r\nexport const persistor = persistStore(store);\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom';\nimport { Provider } from 'react-redux';\nimport { PersistGate } from 'redux-persist/integration/react';\nimport App from './App';\nimport { store, persistor } from './redux/store';\nimport './index.css';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <PersistGate loading={null} persistor={persistor}>\n        <BrowserRouter>\n          <App />\n        </BrowserRouter>\n      </PersistGate>\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}